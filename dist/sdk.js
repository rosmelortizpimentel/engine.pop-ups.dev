var PopupsSDK=function(n){"use strict";var t,o,e,r,i,l,u,a,c,s,p,f={},d=[],m=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,h=Array.isArray;function v(n,t){for(var o in t)n[o]=t[o];return n}function y(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function w(n,o,e){var r,i,l,u={};for(l in o)"key"==l?r=o[l]:"ref"==l?i=o[l]:u[l]=o[l];if(arguments.length>2&&(u.children=arguments.length>3?t.call(arguments,2):e),"function"==typeof n&&null!=n.defaultProps)for(l in n.defaultProps)void 0===u[l]&&(u[l]=n.defaultProps[l]);return g(n,u,r,i,null)}function g(n,t,r,i,l){var u={type:n,props:t,key:r,ref:i,o:null,i:null,p:0,m:null,h:null,constructor:void 0,v:null==l?++e:l,_:-1,k:0};return null==l&&null!=o.vnode&&o.vnode(u),u}function b(n){return n.children}function x(n,t){this.props=n,this.context=t}function _(n,t){if(null==t)return n.i?_(n.i,n._+1):null;for(var o;t<n.o.length;t++)if(null!=(o=n.o[t])&&null!=o.m)return o.m;return"function"==typeof n.type?_(n):null}function k(n){var t,o;if(null!=(n=n.i)&&null!=n.h){for(n.m=n.h.base=null,t=0;t<n.o.length;t++)if(null!=(o=n.o[t])&&null!=o.m){n.m=n.h.base=o.m;break}return k(n)}}function S(n){(!n.S&&(n.S=!0)&&r.push(n)&&!C.C++||i!=o.debounceRendering)&&((i=o.debounceRendering)||l)(C)}function C(){for(var n,t,e,i,l,a,c,s=1;r.length;)r.length>s&&r.sort(u),n=r.shift(),s=r.length,n.S&&(e=void 0,i=void 0,l=(i=(t=n).v).m,a=[],c=[],t.I&&((e=v({},i)).v=i.v+1,o.vnode&&o.vnode(e),A(t.I,e,i,t.P,t.I.namespaceURI,32&i.k?[l]:null,a,null==l?_(i):l,!!(32&i.k),c),e.v=i.v,e.i.o[e._]=e,Y(a,e,c),i.m=i.i=null,e.m!=l&&k(e)));C.C=0}function I(n,t,o,e,r,i,l,u,a,c,s){var p,m,v,y,w,x,k,S=e&&e.o||d,C=t.length;for(a=function(n,t,o,e,r){var i,l,u,a,c,s=o.length,p=s,f=0;for(n.o=new Array(r),i=0;i<r;i++)null!=(l=t[i])&&"boolean"!=typeof l&&"function"!=typeof l?("string"==typeof l||"number"==typeof l||"bigint"==typeof l||l.constructor==String?l=n.o[i]=g(null,l,null,null,null):h(l)?l=n.o[i]=g(b,{children:l},null,null,null):null==l.constructor&&l.p>0?l=n.o[i]=g(l.type,l.props,l.key,l.ref?l.ref:null,l.v):n.o[i]=l,a=i+f,l.i=n,l.p=n.p+1,-1!=(c=l._=z(l,o,a,p))&&(p--,(u=o[c])&&(u.k|=2)),null==u||null==u.v?(-1==c&&(r>s?f--:r<s&&f++),"function"!=typeof l.type&&(l.k|=4)):c!=a&&(c==a-1?f--:c==a+1?f++:(c>a?f--:f++,l.k|=4))):n.o[i]=null;if(p)for(i=0;i<s;i++)null!=(u=o[i])&&!(2&u.k)&&(u.m==e&&(e=_(u)),W(u,u));return e}(o,t,S,a,C),p=0;p<C;p++)null!=(v=o.o[p])&&(m=-1==v._?f:S[v._]||f,v._=p,x=A(n,v,m,r,i,l,u,a,c,s),y=v.m,v.ref&&m.ref!=v.ref&&(m.ref&&D(m.ref,null,v),s.push(v.ref,v.h||y,v)),null==w&&null!=y&&(w=y),(k=!!(4&v.k))||m.o===v.o?a=P(v,a,n,k):"function"==typeof v.type&&void 0!==x?a=x:y&&(a=y.nextSibling),v.k&=-7);return o.m=w,a}function P(n,t,o,e){var r,i;if("function"==typeof n.type){for(r=n.o,i=0;r&&i<r.length;i++)r[i]&&(r[i].i=n,t=P(r[i],t,o,e));return t}n.m!=t&&(e&&(t&&n.type&&!t.parentNode&&(t=_(n)),o.insertBefore(n.m,t||null)),t=n.m);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function z(n,t,o,e){var r,i,l,u=n.key,a=n.type,c=t[o],s=null!=c&&!(2&c.k);if(null===c&&null==u||s&&u==c.key&&a==c.type)return o;if(e>(s?1:0))for(r=o-1,i=o+1;r>=0||i<t.length;)if(null!=(c=t[l=r>=0?r--:i++])&&!(2&c.k)&&u==c.key&&a==c.type)return l;return-1}function F(n,t,o){"-"==t[0]?n.setProperty(t,null==o?"":o):n[t]=null==o?"":"number"!=typeof o||m.test(t)?o:o+"px"}function T(n,t,o,e,r){var i,l;n:if("style"==t)if("string"==typeof o)n.style.cssText=o;else{if("string"==typeof e&&(n.style.cssText=e=""),e)for(t in e)o&&t in o||F(n.style,t,"");if(o)for(t in o)e&&o[t]==e[t]||F(n.style,t,o[t])}else if("o"==t[0]&&"n"==t[1])i=t!=(t=t.replace(a,"$1")),l=t.toLowerCase(),t=l in n||"onFocusOut"==t||"onFocusIn"==t?l.slice(2):t.slice(2),n.l||(n.l={}),n.l[t+i]=o,o?e?o.u=e.u:(o.u=c,n.addEventListener(t,i?p:s,i)):n.removeEventListener(t,i?p:s,i);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in n)try{n[t]=null==o?"":o;break n}catch(u){}"function"==typeof o||(null==o||!1===o&&"-"!=t[4]?n.removeAttribute(t):n.setAttribute(t,"popover"==t&&1==o?"":o))}}function $(n){return function(t){if(this.l){var e=this.l[t.type+n];if(null==t.t)t.t=c++;else if(t.t<e.u)return;return e(o.event?o.event(t):t)}}}function A(n,e,r,i,l,u,a,c,s,p){var d,m,w,g,k,S,C,P,z,F,$,A,Y,D,W,M,R,U=e.type;if(null!=e.constructor)return null;128&r.k&&(s=!!(32&r.k),u=[c=e.m=r.m]),(d=o.p)&&d(e);n:if("function"==typeof U)try{if(P=e.props,z="prototype"in U&&U.prototype.render,F=(d=U.contextType)&&i[d.h],$=d?F?F.props.value:d.i:i,r.h?C=(m=e.h=r.h).i=m.F:(z?e.h=m=new U(P,$):(e.h=m=new x(P,$),m.constructor=U,m.render=H),F&&F.sub(m),m.state||(m.state={}),m.P=i,w=m.S=!0,m.T=[],m.$=[]),z&&null==m.A&&(m.A=m.state),z&&null!=U.getDerivedStateFromProps&&(m.A==m.state&&(m.A=v({},m.A)),v(m.A,U.getDerivedStateFromProps(P,m.A))),g=m.props,k=m.state,m.v=e,w)z&&null==U.getDerivedStateFromProps&&null!=m.componentWillMount&&m.componentWillMount(),z&&null!=m.componentDidMount&&m.T.push(m.componentDidMount);else{if(z&&null==U.getDerivedStateFromProps&&P!==g&&null!=m.componentWillReceiveProps&&m.componentWillReceiveProps(P,$),e.v==r.v||!m.m&&null!=m.shouldComponentUpdate&&!1===m.shouldComponentUpdate(P,m.A,$)){for(e.v!=r.v&&(m.props=P,m.state=m.A,m.S=!1),e.m=r.m,e.o=r.o,e.o.some(function(n){n&&(n.i=e)}),A=0;A<m.$.length;A++)m.T.push(m.$[A]);m.$=[],m.T.length&&a.push(m);break n}null!=m.componentWillUpdate&&m.componentWillUpdate(P,m.A,$),z&&null!=m.componentDidUpdate&&m.T.push(function(){m.componentDidUpdate(g,k,S)})}if(m.context=$,m.props=P,m.I=n,m.m=!1,Y=o.C,D=0,z){for(m.state=m.A,m.S=!1,Y&&Y(e),d=m.render(m.props,m.state,m.context),W=0;W<m.$.length;W++)m.T.push(m.$[W]);m.$=[]}else do{m.S=!1,Y&&Y(e),d=m.render(m.props,m.state,m.context),m.state=m.A}while(m.S&&++D<25);m.state=m.A,null!=m.getChildContext&&(i=v(v({},i),m.getChildContext())),z&&!w&&null!=m.getSnapshotBeforeUpdate&&(S=m.getSnapshotBeforeUpdate(g,k)),M=d,null!=d&&d.type===b&&null==d.key&&(M=j(d.props.children)),c=I(n,h(M)?M:[M],e,r,i,l,u,a,c,s,p),m.base=e.m,e.k&=-161,m.T.length&&a.push(m),C&&(m.F=m.i=null)}catch(L){if(e.v=null,s||null!=u)if(L.then){for(e.k|=s?160:128;c&&8==c.nodeType&&c.nextSibling;)c=c.nextSibling;u[u.indexOf(c)]=null,e.m=c}else{for(R=u.length;R--;)y(u[R]);O(e)}else e.m=r.m,e.o=r.o,L.then||O(e);o.m(L,e,r)}else null==u&&e.v==r.v?(e.o=r.o,e.m=r.m):c=e.m=function(n,e,r,i,l,u,a,c,s){var p,d,m,v,w,g,b,x=r.props||f,k=e.props,S=e.type;if("svg"==S?l="http://www.w3.org/2000/svg":"math"==S?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),null!=u)for(p=0;p<u.length;p++)if((w=u[p])&&"setAttribute"in w==!!S&&(S?w.localName==S:3==w.nodeType)){n=w,u[p]=null;break}if(null==n){if(null==S)return document.createTextNode(k);n=document.createElementNS(l,S,k.is&&k),c&&(o.O&&o.O(e,u),c=!1),u=null}if(null==S)x===k||c&&n.data==k||(n.data=k);else{if(u=u&&t.call(n.childNodes),!c&&null!=u)for(x={},p=0;p<n.attributes.length;p++)x[(w=n.attributes[p]).name]=w.value;for(p in x)if(w=x[p],"children"==p);else if("dangerouslySetInnerHTML"==p)m=w;else if(!(p in k)){if("value"==p&&"defaultValue"in k||"checked"==p&&"defaultChecked"in k)continue;T(n,p,null,w,l)}for(p in k)w=k[p],"children"==p?v=w:"dangerouslySetInnerHTML"==p?d=w:"value"==p?g=w:"checked"==p?b=w:c&&"function"!=typeof w||x[p]===w||T(n,p,w,x[p],l);if(d)c||m&&(d.Y==m.Y||d.Y==n.innerHTML)||(n.innerHTML=d.Y),e.o=[];else if(m&&(n.innerHTML=""),I("template"==e.type?n.content:n,h(v)?v:[v],e,r,i,"foreignObject"==S?"http://www.w3.org/1999/xhtml":l,u,a,u?u[0]:r.o&&_(r,0),c,s),null!=u)for(p=u.length;p--;)y(u[p]);c||(p="value","progress"==S&&null==g?n.removeAttribute("value"):null!=g&&(g!==n[p]||"progress"==S&&!g||"option"==S&&g!=x[p])&&T(n,p,g,x[p],l),p="checked",null!=b&&b!=n[p]&&T(n,p,b,x[p],l))}return n}(r.m,e,r,i,l,u,a,s,p);return(d=o.diffed)&&d(e),128&e.k?void 0:c}function O(n){n&&n.h&&(n.h.m=!0),n&&n.o&&n.o.forEach(O)}function Y(n,t,e){for(var r=0;r<e.length;r++)D(e[r],e[++r],e[++r]);o.h&&o.h(t,n),n.some(function(t){try{n=t.T,t.T=[],n.some(function(n){n.call(t)})}catch(e){o.m(e,t.v)}})}function j(n){return"object"!=typeof n||null==n||n.p&&n.p>0?n:h(n)?n.map(j):v({},n)}function D(n,t,e){try{if("function"==typeof n){var r="function"==typeof n.k;r&&n.k(),r&&null==t||(n.k=n(t))}else n.current=t}catch(i){o.m(i,e)}}function W(n,t,e){var r,i;if(o.unmount&&o.unmount(n),(r=n.ref)&&(r.current&&r.current!=n.m||D(r,null,t)),null!=(r=n.h)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(l){o.m(l,t)}r.base=r.I=null}if(r=n.o)for(i=0;i<r.length;i++)r[i]&&W(r[i],t,e||"function"!=typeof n.type);e||y(n.m),n.h=n.i=n.m=void 0}function H(n,t,o){return this.constructor(n,o)}t=d.slice,o={m:function(n,t,o,e){for(var r,i,l;t=t.i;)if((r=t.h)&&!r.i)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(n)),l=r.S),null!=r.componentDidCatch&&(r.componentDidCatch(n,e||{}),l=r.S),l)return r.F=r}catch(u){n=u}throw n}},e=0,x.prototype.setState=function(n,t){var o;o=null!=this.A&&this.A!=this.state?this.A:this.A=v({},this.state),"function"==typeof n&&(n=n(v({},o),this.props)),n&&v(o,n),null!=n&&this.v&&(t&&this.$.push(t),S(this))},x.prototype.forceUpdate=function(n){this.v&&(this.m=!0,n&&this.T.push(n),S(this))},x.prototype.render=b,r=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function(n,t){return n.v.p-t.v.p},C.C=0,a=/(PointerCapture)$|Capture$/i,c=0,s=$(!1),p=$(!0);var M=0;function R(n,t,e,r,i,l){t||(t={});var u,a,c=t;if("ref"in c)for(a in c={},t)"ref"==a?u=t[a]:c[a]=t[a];var s={type:n,props:c,key:e,ref:u,o:null,i:null,p:0,m:null,h:null,constructor:void 0,v:--M,_:-1,k:0,j:i,D:l};if("function"==typeof n&&(u=n.defaultProps))for(a in u)void 0===c[a]&&(c[a]=u[a]);return o.vnode&&o.vnode(s),s}var U,L,q,N,B=0,E=[],G=o,K=G.p,V=G.C,J=G.diffed,Q=G.h,X=G.unmount,Z=G.i;function nn(n,t){G.T&&G.T(L,n,B||t),B=0;var o=L.W||(L.W={i:[],T:[]});return n>=o.i.length&&o.i.push({}),o.i[n]}function tn(n,t){return B=8,function(n,t){var o=nn(U++,7);return function(n,t){return!n||n.length!==t.length||t.some(function(t,o){return t!==n[o]})}(o.W,t)&&(o.i=n(),o.W=t,o.T=n),o.i}(function(){return n},t)}function on(){for(var n;n=E.shift();)if(n.I&&n.W)try{n.W.T.forEach(ln),n.W.T.forEach(un),n.W.T=[]}catch(t){n.W.T=[],G.m(t,n.v)}}G.p=function(n){L=null,K&&K(n)},G.i=function(n,t){n&&t.o&&t.o.O&&(n.O=t.o.O),Z&&Z(n,t)},G.C=function(n){V&&V(n),U=0;var t=(L=n.h).W;t&&(q===L?(t.T=[],L.T=[],t.i.forEach(function(n){n.H&&(n.i=n.H),n.u=n.H=void 0})):(t.T.forEach(ln),t.T.forEach(un),t.T=[],U=0)),q=L},G.diffed=function(n){J&&J(n);var t=n.h;t&&t.W&&(t.W.T.length&&(1!==E.push(t)&&N===G.requestAnimationFrame||((N=G.requestAnimationFrame)||rn)(on)),t.W.i.forEach(function(n){n.u&&(n.W=n.u),n.u=void 0})),q=L=null},G.h=function(n,t){t.some(function(n){try{n.T.forEach(ln),n.T=n.T.filter(function(n){return!n.i||un(n)})}catch(o){t.some(function(n){n.T&&(n.T=[])}),t=[],G.m(o,n.v)}}),Q&&Q(n,t)},G.unmount=function(n){X&&X(n);var t,o=n.h;o&&o.W&&(o.W.i.forEach(function(n){try{ln(n)}catch(o){t=o}}),o.W=void 0,t&&G.m(t,o.v))};var en="function"==typeof requestAnimationFrame;function rn(n){var t,o=function(){clearTimeout(e),en&&cancelAnimationFrame(t),setTimeout(n)},e=setTimeout(o,35);en&&(t=requestAnimationFrame(o))}function ln(n){var t=L,o=n.h;"function"==typeof o&&(n.h=void 0,o()),L=t}function un(n){var t=L;n.h=n.i(),L=t}function an(n,t){return"function"==typeof t?t(n):t}const cn={none:"none",subtle:"0 2px 8px rgba(0, 0, 0, 0.08)",medium:"0 4px 20px rgba(0, 0, 0, 0.15)",strong:"0 8px 40px rgba(0, 0, 0, 0.25)"},sn="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",pn="\n  @keyframes popupFadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n\n  @keyframes popupScaleIn {\n    from {\n      opacity: 0;\n      transform: translate(-50%, -50%) scale(0.95);\n    }\n    to {\n      opacity: 1;\n      transform: translate(-50%, -50%) scale(1);\n    }\n  }\n\n  @keyframes popupFadeOut {\n    from {\n      opacity: 1;\n    }\n    to {\n      opacity: 0;\n    }\n  }\n\n  @keyframes popupScaleOut {\n    from {\n      opacity: 1;\n      transform: translate(-50%, -50%) scale(1);\n    }\n    to {\n      opacity: 0;\n      transform: translate(-50%, -50%) scale(0.95);\n    }\n  }\n\n  @keyframes slideDown {\n    from {\n      transform: translateY(-100%);\n    }\n    to {\n      transform: translateY(0);\n    }\n  }\n\n  @keyframes slideUp {\n    from {\n      transform: translateY(100%);\n    }\n    to {\n      transform: translateY(0);\n    }\n  }\n\n  @keyframes slideOutUp {\n    from {\n      transform: translateY(0);\n    }\n    to {\n      transform: translateY(-100%);\n    }\n  }\n\n  @keyframes slideOutDown {\n    from {\n      transform: translateY(0);\n    }\n    to {\n      transform: translateY(100%);\n    }\n  }\n";function fn(n,t,o=!1){return"modal"===n?{animation:o?"popupScaleOut 200ms ease-in forwards":"popupScaleIn 300ms ease-out forwards"}:"top_bar"===n?"top"===t?{animation:o?"slideOutUp 200ms ease-in forwards":"slideDown 300ms ease-out forwards"}:{animation:o?"slideOutDown 200ms ease-in forwards":"slideUp 300ms ease-out forwards"}:{}}function dn(n=!1){return{animation:n?"popupFadeOut 200ms ease-in forwards":"popupFadeIn 300ms ease-out forwards"}}function mn(n,t){var o,e,r,i;const{design:l}=n,u=l.boxShadow||(null==(o=l.styles)?void 0:o.boxShadow)||"medium",a=cn[u]||cn.medium,c=l.borderRadius||(null==(e=l.styles)?void 0:e.borderRadius)||"12px",s={fontFamily:sn,boxSizing:"border-box",backgroundColor:(null==(r=l.colors)?void 0:r.background)||"#ffffff",color:(null==(i=l.colors)?void 0:i.text)||"#1a1a1a",borderRadius:c,boxShadow:a,maxWidth:"90vw",width:"top_bar"===l.type?"100%":"420px"};return t?{...s,position:"relative",margin:"0 auto"}:"modal"===l.type?{...s,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2147483647}:{...s,position:"fixed",left:0,right:0,width:"100vw",maxWidth:"100vw",borderRadius:0,..."top"===l.position?{top:0}:{bottom:0},zIndex:2147483647}}function hn(n){var t,o;return{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:(null==(o=null==(t=n.design)?void 0:t.colors)?void 0:o.overlay)||"rgba(0, 0, 0, 0.6)",zIndex:2147483646}}function vn(n){var t,o,e,r;return{position:"absolute",top:"top_bar"===(null==(t=n.design)?void 0:t.type)?"50%":"12px",right:"12px",transform:"top_bar"===(null==(o=n.design)?void 0:o.type)?"translateY(-50%)":"none",background:"transparent",border:"none",cursor:"pointer",padding:"8px",minWidth:"44px",minHeight:"44px",display:"flex",alignItems:"center",justifyContent:"center",color:(null==(r=null==(e=n.design)?void 0:e.colors)?void 0:r.closeIcon)||"#999999",borderRadius:"50%",transition:"background-color 150ms ease"}}function yn(n){var t,o,e;const{design:r}=n,i=r.borderRadius||(null==(t=r.styles)?void 0:t.borderRadius)||"8px";return{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"12px 24px",fontSize:"14px",fontWeight:"600",fontFamily:sn,color:(null==(o=r.colors)?void 0:o.buttonText)||"#ffffff",backgroundColor:(null==(e=r.colors)?void 0:e.buttonBg)||"#000000",border:"none",borderRadius:i,cursor:"pointer",transition:"opacity 150ms ease, transform 150ms ease",whiteSpace:"nowrap"}}function wn(n){return{margin:"top_bar"===n?"0":"0 0 20px 0",fontSize:"top_bar"===n?"14px":"15px",lineHeight:"1.5",opacity:.85}}const gn="\n  @media (max-width: 480px) {\n    .popup-container.modal {\n      width: 95vw !important;\n      max-width: none !important;\n    }\n    \n    .popup-content.modal {\n      padding: 20px !important;\n    }\n    \n    .popup-headline.modal {\n      font-size: 18px !important;\n    }\n    \n    .popup-body.modal {\n      font-size: 14px !important;\n    }\n    \n    .popup-content.top_bar {\n      flex-direction: column !important;\n      text-align: center !important;\n      padding: 16px !important;\n    }\n    \n    .popup-text-container.top_bar {\n      margin-right: 0 !important;\n    }\n  }\n";function bn({config:n,onClose:t,isPreview:o=!1}){const[e,r]=(B=1,function(n,t){var o=nn(U++,2);if(o.t=n,!o.h&&(o.i=[an(void 0,t),function(n){var t=o.H?o.H[0]:o.i[0],e=o.t(t,n);t!==e&&(o.H=[e,o.i[1]],o.h.setState({}))}],o.h=L,!L.M)){var e=function(n,t,e){if(!o.h.W)return!0;var i=o.h.W.i.filter(function(n){return!!n.h});if(i.every(function(n){return!n.H}))return!r||r.call(this,n,t,e);var l=o.h.props!==n;return i.forEach(function(n){if(n.H){var t=n.i[0];n.i=n.H,n.H=void 0,t!==n.i[0]&&(l=!0)}}),r&&r.call(this,n,t,e)||l};L.M=!0;var r=L.shouldComponentUpdate,i=L.componentWillUpdate;L.componentWillUpdate=function(n,t,o){if(this.m){var l=r;r=void 0,e(n,t,o),r=l}i&&i.call(this,n,t,o)},L.shouldComponentUpdate=e}return o.H||o.i}(an,!1)),{design:i}=n,l="modal"===i.type,u="top_bar"===i.type,a=tn(()=>{o?null==t||t():(r(!0),setTimeout(()=>{null==t||t()},200))},[o,t]),c=tn(()=>{i.btnLink&&(window.location.href=i.btnLink),a()},[i.btnLink,a]),s=tn(n=>{n.target===n.currentTarget&&a()},[a]),p=()=>R("button",{onClick:a,style:vn(n),"aria-label":"Close popup",class:"popup-close-btn",children:R("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[R("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),R("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),f=()=>R("div",{class:"popup-container modal",style:{...mn(n,o),...o?{}:fn("modal",null,e),position:o?"relative":"fixed"},role:"dialog","aria-modal":"true","aria-labelledby":"popup-headline",children:[p(),R("div",{class:"popup-content modal",style:{padding:"24px",textAlign:"center"},children:[i.headline&&R("h2",{id:"popup-headline",class:"popup-headline modal",style:{margin:"0 0 12px 0",fontSize:"22px",fontWeight:"700",lineHeight:"1.3"},children:i.headline}),i.body&&R("p",{class:"popup-body modal",style:wn("modal"),children:i.body}),i.btnText?R("button",{onClick:c,style:yn(n),class:"popup-btn",children:i.btnText}):null,i.showWatermark?R("div",{style:{marginTop:"16px",paddingTop:"12px",borderTop:"1px solid rgba(0, 0, 0, 0.08)",fontSize:"11px",opacity:.5,textAlign:"center"},class:"popup-watermark",children:["Powered by"," ",R("a",{href:"https://pop-ups.dev",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit",textDecoration:"underline"},children:"Pop-ups.dev"})]}):null]})]}),d=()=>{return l?f():u?R("div",{class:"popup-container top_bar",style:{...mn(n,o),...o?{}:fn("top_bar",i.position,e)},role:"banner","aria-labelledby":"popup-headline",children:[R("div",{class:"popup-content top_bar",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px 50px 10px 20px",gap:"12px",flexWrap:"nowrap",minHeight:"40px"},children:[i.headline&&R("span",{id:"popup-headline",class:"popup-headline top_bar",style:{fontWeight:"700",fontSize:"14px",whiteSpace:"nowrap"},children:i.headline}),i.body&&R("span",{class:"popup-body top_bar",style:{fontSize:"14px",opacity:.9,whiteSpace:"nowrap"},children:i.body}),i.btnText&&R("button",{onClick:c,style:{display:"inline-flex",alignItems:"center",padding:"6px 16px",fontSize:"13px",fontWeight:"600",color:(null==(t=i.colors)?void 0:t.buttonText)||"#ffffff",backgroundColor:(null==(r=i.colors)?void 0:r.buttonBg)||"#10b981",border:"none",borderRadius:"4px",cursor:"pointer",whiteSpace:"nowrap"},class:"popup-btn top_bar",children:i.btnText})]}),p()]}):f();var t,r};return R(b,o?{children:[R("style",{children:pn}),R("style",{children:gn}),d()]}:{children:[R("style",{children:pn}),R("style",{children:gn}),R("style",{children:"\n        .popup-close-btn:hover {\n          background-color: rgba(0, 0, 0, 0.05);\n        }\n        .popup-btn:hover {\n          opacity: 0.9;\n          transform: translateY(-1px);\n        }\n        .popup-btn:active {\n          transform: translateY(0);\n        }\n      "}),l&&R("div",{class:"popup-overlay",style:{...hn(n),...dn(e)},onClick:s,"aria-hidden":"true"}),d()]})}function xn(n){const t=requestAnimationFrame(()=>{n()});return()=>cancelAnimationFrame(t)}const _n="popups_dev_";function kn(n){return`${_n}${n}_session`}function Sn(n){return`${_n}${n}_last_shown`}function Cn(n){return`${_n}${n}_lifetime`}const In=document.currentScript;function Pn(){if(In&&In.hasAttribute("data-api-key"))return In.getAttribute("data-api-key");const n=document.querySelectorAll("script[data-api-key]"),t=n[n.length-1];return t?t.getAttribute("data-api-key"):(console.error("[Pop-ups.dev] No script tag with data-api-key found"),null)}function zn(n){var e,r,i;const{host:l,container:u}=function(){const n=document.createElement("div");n.id="popups-dev-host",n.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    overflow: visible;\n    z-index: 2147483647;\n    pointer-events: none;\n  ",document.body.appendChild(n);const t=n.attachShadow({mode:"open"}),o=document.createElement("div");return o.id="popups-dev-container",o.style.cssText="pointer-events: auto;",t.appendChild(o),{host:n,shadowRoot:t,container:o}}();!function(n,t){const{cap:o}=t;try{switch(o){case"once_per_session":!function(n){sessionStorage.setItem(kn(n),"true")}(n);break;case"once_per_user_24h":!function(n){localStorage.setItem(Sn(n),Date.now().toString())}(n);break;case"once_lifetime":!function(n){localStorage.setItem(Cn(n),"true")}(n)}}catch(e){console.warn("[Pop-ups.dev] Could not record popup view:",e.message)}}(n.id,n.rules.frequency);let a=null;if("top_bar"===(null==(e=n.design)?void 0:e.type)&&!1!==(null==(r=n.design)?void 0:r.pushContent)){const t=(null==(i=n.design)?void 0:i.position)||"top",o="50px",e="top"===t?document.body.style.marginTop:document.body.style.marginBottom;"top"===t?document.body.style.marginTop=o:document.body.style.marginBottom=o,a=()=>{"top"===t?document.body.style.marginTop=e||"":document.body.style.marginBottom=e||""}}!function(n,e,r){var i,l,u,a,c;i=w(bn,{config:n,onClose:r,isPreview:!1}),(l=e)==document&&(l=document.documentElement),o.i&&o.i(i,l),u=l.o,a=[],c=[],A(l,i=l.o=w(b,null,[i]),u||f,f,l.namespaceURI,u?null:l.firstChild?t.call(l.childNodes):null,a,u?u.m:l.firstChild,!1,c),Y(a,i,c)}(n,u,()=>{a&&a(),setTimeout(()=>{!function(n){n&&n.parentNode&&n.parentNode.removeChild(n)}(l)},250)})}function Fn(n){return function(n,t){const{cap:o}=t;switch(o){case"always":default:return!0;case"once_per_session":return!function(n){try{return"true"===sessionStorage.getItem(kn(n))}catch(t){return!1}}(n);case"once_per_user_24h":return!function(n){try{const t=localStorage.getItem(Sn(n));if(!t)return!1;const o=parseInt(t,10);return Date.now()-o<864e5}catch(t){return!1}}(n);case"once_lifetime":return!function(n){try{return"true"===localStorage.getItem(Cn(n))}catch(t){return!1}}(n)}}(n.id,n.rules.frequency)?function(n,t){const{type:o,value:e}=n;switch(o){case"immediate":return xn(t);case"time_delay":return function(n,t){const o=setTimeout(()=>{t()},1e3*n);return()=>clearTimeout(o)}(e,t);case"scroll_percent":return function(n,t){let o=!1;const e=()=>{if(o)return;const r=document.documentElement.scrollHeight-window.innerHeight,i=window.scrollY;(r>0?i/r*100:0)>=n&&(o=!0,t(),window.removeEventListener("scroll",e))};return e(),o||window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)}(e,t);case"exit_intent":return function(n){let t=!1;const o=e=>{t||e.clientY<=0&&(t=!0,n(),document.removeEventListener("mouseleave",o))};return"ontouchstart"in window||navigator.maxTouchPoints>0||document.addEventListener("mouseleave",o),()=>document.removeEventListener("mouseleave",o)}(t);default:return console.warn(`[Pop-ups.dev] Unknown trigger type: ${o}`),xn(t)}}(n.rules.trigger,()=>{zn(n)}):null}async function Tn(){const n=Pn();if(!n)return;const t=await async function(n){try{const t=encodeURIComponent(window.location.pathname),o=await fetch(`https://twuvzxjmywyenpsxwavy.supabase.co/functions/v1/deliver-popups?api_key=${n}&url=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw 403===o.status?console.error("[Pop-ups.dev] Origin not allowed for this API key"):404===o.status&&console.error("[Pop-ups.dev] Project not found"),new Error(`API returned ${o.status}`);return await o.json()}catch(t){return console.error("[Pop-ups.dev] Failed to fetch popup configs:",t),[]}}(n);if(!t||0===t.length)return;const o=[];for(const e of t){const n=Fn(e);n&&o.push(n)}window.__popupsDevCleanups=o}return"loading"===document.readyState?document.addEventListener("DOMContentLoaded",Tn):Tn(),n.getApiKey=Pn,n.init=Tn,n.showPopup=zn,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),n}({});
